# **Linux-Shell-Scripting.**

# **Chapter 3: Shells (bash) structured Language Constructs.**

- Decision making
- Loops

Is there any difference making decision in Real life and with Computers? Well real life decision are quite
complicated to all of us and computers even don't have that much power to understand our real life
decisions. What computer know is 0 (zero) and 1 that is Yes or No. To make this idea clear, lets play
some game (WOW!) with bc - Linux calculator program.

### #bc

After this command bc is started and waiting for your commands, i.e. give it some calculation as follows

type 5 + 2 as:

5 + 2

7

7 is response of bc i.e. addition of 5 + 2 you can even try

5 - 2

5 / 2

See what happened if you type 5 > 2 as follows

5 > 2

1

1 (One?) is response of bc, How? bc compare 5 with 2 as, Is 5 is greater then 2, (If I ask same question to you, your answer will be YES), bc gives this 'YES' answer by showing 1 value. Now try

5 < 2

0

0 (Zero) indicates the false i.e. Is 5 is less than 2?, Your answer will be no which is indicated by bc by showing 0 (Zero). Remember in bc, relational expression always returns true (1) or false (0 - zero).


It means when ever there is any type of comparison in Linux Shell It gives only two answer one is YES and NO is other.

Linux shell value = Zero(0) = Yes/True

Linux shell value = Non-Zero = No/False

- # **if condition**

if condition which is used for decision making in shell script, If given condition is true then command1 is executed.

	if condition
	then
		command1 if condition is true or if exit status
		of condition is 0 (Zero)
	fi..



Condition is defined as:
"Condition is nothing but comparison between two values."

For compression you can use test or [ expr ] statements or even exist status can be also used.

Expression is defined as:
"An expression is nothing but combination of values, relational operator (such as >,<, <> etc) and
mathematical operators (such as +, -, / etc )."

Following are all examples of expression:

5 > 2

3 + 6

3 * 65

a < b

c > 5

c > 5 + 30 -1

Write shell script as:

![Screen Shot 2021-01-27 at 11.57.35 PM.png]({{site.baseurl}}/Screen Shot 2021-01-27 at 11.57.35 PM.png)

Run above script as:
![Screen Shot 2021-01-28 at 12.00.40 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.00.40 AM.png)

Shell script name is showfile ($0) and nilesh is argument (which is $1).Then shell compare it as follows:

if cat $1 which is expanded to if cat foo.

### **Exercise**

Write shell script as follows:

![Screen Shot 2021-01-28 at 12.06.32 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.06.32 AM.png)

Run above script as:

![Screen Shot 2021-01-28 at 12.07.17 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.07.17 AM.png)

### **Answer the following question in referance to above script:**

(A) foo file exists on your disk and you give command, $ ./rmfi foo what will be output?

(B) If bar file not present on your disk and you give command, $ ./rmfi bar what will be output?

(C) And if you type $ ./rmfi What will be output?


#### **Answers**

(A) ![Screen Shot 2021-01-28 at 12.09.01 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.09.01 AM.png)

(B)![Screen Shot 2021-01-28 at 12.09.40 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.09.40 AM.png)

(C)![Screen Shot 2021-01-28 at 12.10.55 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.10.55 AM.png)


- # **test command or [ expr ]**

test command or [ expr ] is used to see if an expression is true, and if it is true it return zero(0), otherwise returns nonzero for false.

Syntax:
test expression OR [ expression ]

### **Following script determine whether given argument number is positive.**

![Screen Shot 2021-01-28 at 12.17.17 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.17.17 AM.png)

Run it as follows:

![Screen Shot 2021-01-28 at 12.21.19 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.21.19 AM.png)

- Detailed explanation
The line, if test $1 -gt 0 , test to see if first command line argument($1) is greater than 0. If it is true(0) then test will return 0 and output will printed as 5 number is positive but for -45 argument there is no output because our condition is not true(0) (no -45 is not greater than 0) hence echo statement is skipped.
And for last statement we have not supplied any argument hence error ./ispostive: test: -gt: unary
operator expected, is generated by shell , to avoid such error we can test whether command line argument is supplied or not.

- test or [ expr ] works with

1.Integer ( Number without decimal point)

2.File types

3.Character strings

### **NOTE: == is equal, != is not equal.**

-eq = is equal to. 

-ne = is not equal to.

-lt = is less than.

-le = is less than or equal to.

-gt = greater than

-ge = is greater than or equal to.


string1 = string2 = string1 is equal to string2

string != string2 = string1 is NOT equal to string2

string1           = string1 is NOT NULL or not defined 

-n string1        = string1 is NOT NULL and does exist

-z string1        = string1 is NULL and does exist


! expression      = Logical NOT

expression1 -a expression2 = Logical AND

expression1 -o expression2 = Logical OR

- # **if...else...fi**

If given condition is true then command1 is executed otherwise command2 is executed.

Syntax:

	if condition
    then
    	condition is zero (true - 0)
        execute all commands upto else statement
	else
    	if condition is not true then
        execute all commands upto fi
  	fi
    
 Write Script as follows:
 
 ![Screen Shot 2021-01-28 at 12.39.52 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.39.52 AM.png)


Try it as follows:

![Screen Shot 2021-01-28 at 12.41.02 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.41.02 AM.png)

Detailed explanation:
First script checks whether command line argument is given or not, if not given then it print error message as "./ispos_n : You must give/supply one integers". if statement checks whether number of argument ($#) passed to script is not equal (-eq) to 0, if we passed any argument to script then this if statement is false and if no command line argument is given then this if statement is true. The echo command i.e.

echo "$0 : You must give/supply one integers"
| |
| |
1 2
1 will print Name of script
2 will print this error message

And finally statement exit 1 causes normal program termination with exit status 1 (nonzero means script is not successfully run).
The last sample run $ isnump_n 0 , gives output as "0 number is negative", because given argument is not > 0, hence condition is false and it's taken as negative number. To avoid this replace second if statement with if test $1 -ge 0.
    
- # **Nested if-else-fi**

You can write the entire if-else construct within either the body of the if statement of the body of an else statement. This is called the nesting of ifs.

![Screen Shot 2021-01-28 at 12.53.31 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.53.31 AM.png)

Run the above shell script as follows:

![Screen Shot 2021-01-28 at 12.55.09 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 12.55.09 AM.png)

Note that Second if-else constuct is nested in the first else statement. If the condition in the first if statement is false the the condition in the second if statement is checked. If it is false as well the final else statement is executed.

Syntax:

	if condition
		then
			if condition
		then
			.....
			..
			do this
		else
			....
			..
			do this
	fi
		else
			...
			.....
			do this
	fi

- # **Multilevel if-then-else**

Syntax:

	if condition
	then
		condition is zero (true - 0)
		execute all commands up to elif statement
	elif condition1
	then
		condition1 is zero (true - 0)
		execute all commands up to elif statement
	elif condition2
	then
		condition2 is zero (true - 0)
		execute all commands up to elif statement
	else
		None of the above condtion,condtion1,condtion2 are true (i.e.
		all of the above nonzero or false)
		execute all commands up to fi
	fi
   
For multilevel if-then-else statement try the following script:

![Screen Shot 2021-01-28 at 1.00.10 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 1.00.10 AM.png)


Try above script as follows:

![Screen Shot 2021-01-28 at 1.01.11 AM.png]({{site.baseurl}}/Screen Shot 2021-01-28 at 1.01.11 AM.png)

Above program gives error for last run, here integer comparison is expected therefore error like "./elf: [: -gt: unary operator
expected" occurs, but still our program notify this error to user by providing message "Opps! a is not number, give number".




